(()=>{"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,f=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){f=!0,a=e},f:function(){try{l||null==r.return||r.return()}finally{if(f)throw a}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=null,i=new WeakMap,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dep=new Set}var n,o;return n=e,(o=[{key:"add",value:function(e){this.dep.add(e)}},{key:"trigger",value:function(){var e,n=t(this.dep);try{for(n.s();!(e=n.n()).done;)(0,e.value)()}catch(e){n.e(e)}finally{n.f()}}}])&&r(n.prototype,o),e}();function l(e){o=e,e(),o=null}function f(n){return new Proxy(n,{get:function(t,n){return function(e,t){if(null!==o){i.has(e)||i.set(e,new Map);var n=i.get(e);n.has(t)||n.set(t,new a),n.get(t).add(o)}}(t,n),"object"===e(Reflect.get(t,n))?f(Reflect.get(t,n)):Reflect.get(t,n)},set:function(e,n,r){return e[n]?(Reflect.set(e,n,r),function(e,t){if(i.has(e)){var n=i.get(e);n.has(t)&&n.get(t).trigger()}}(e,n),!0):(Reflect.set(e,n,r),function(e,n){if(i.has(e)){var r,a=i.get(e),l=new Set,f=t(Reflect.ownKeys(e));try{for(f.s();!(r=f.n()).done;){var u=r.value;if(a.has(u)&&u!==n){var c,s=a.get(u).dep,y=t(s);try{for(y.s();!(c=y.n()).done;){var d=c.value;l.add(d),s.delete(d)}}catch(e){y.e(e)}finally{y.f()}}}}catch(e){f.e(e)}finally{f.f()}var v,h=t(l);try{for(h.s();!(v=h.n()).done;){var p=v.value;o=p,p()}}catch(e){h.e(e)}finally{h.f()}}}(e,n),!0)}})}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_",{el:null,type:null,index:++e.INDEX,clonedFromIndex:0}),this.type=t,this.props=n,this.children=r};function y(e){return Object.prototype.toString.call(e).slice(8,-1)}function d(e){return e instanceof HTMLElement||e instanceof Text}function v(e){return"String"===y(e)}function h(e){return void 0===e}function p(e){return"Object"===y(e)?0===Reflect.ownKeys(e).length:"Array"===y(e)?0===e.length:void 0}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=""===e?s.TYPE.TEXT:s.TYPE.ELEMENT;p(n)||(n=n.map((function(e){return v(e)?m("",{text:e},[]):e})));var o=new s(e,t,n);return o._.type=r,o}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){return v(e)&&(e=b(document,e)),e.querySelector(t)}function w(e,t){v(t)&&(t=document.querySelector(t)),d(t)&&t.appendChild(e)}function E(e,t,n){if(!d(e))throw new Error("first para must be an HtmlElement object.");if(v(t)&&(t=b(document,t)),d(t)&&v(n)&&(n=b(t,n)),d(t)&&d(n)){var r,o=!1,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(t.childNodes);try{for(i.s();!(r=i.n()).done;)if(r.value===n){o=!0;break}}catch(e){i.e(e)}finally{i.f()}if(!o)throw new Error("Can not insert element to an ancestor element.");t.insertBefore(e,n)}}function T(e,t,n){if(!v(t))throw new Error("attr must be a string.");if(v(e)&&(e=b(document,e)),!d(e))throw new Error("Try setAttribute to a non HtmlElement.");if("on"===t.toLowerCase().slice(0,2)){if("Function"!==y(n))throw new Error("Try to addEventListener with a non function value.");var r=t.slice(2).toLowerCase();e.removeEventListener(r,n),e.addEventListener(r,n)}else t=function(e){if("string"!=typeof e)return"";for(var t=e.split(""),n=e.length-1;n>=0;n--)t[n]>="A"&&t[n]<="Z"&&(t[n]=t[n].toLowerCase(),t.splice(n,0,"-"));return t.join("")}(t),e.setAttribute(t,n)}function S(e,t){if(!v(t))throw new Error("attr must be a string.");if(v(e)&&(e=b(document,e)),!d(e))throw new Error("Try setAttribute to a non HtmlElement.");e.removeAttribute(t)}function A(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n){if(h(e)&&(console.warn("There are something undefined when mounting a VNode. (You may try to modify an array's length larger directly.)"),e=m("",{},["undefined"])),e._.type&s.TYPE.ELEMENT){var r=e.type,o=e,i=o.props,a=o.children,l=function(e){return document.createElement(e)}(r);if(e._.el=l,!p(i)){var f,u=A(Reflect.ownKeys(i));try{for(u.s();!(f=u.n()).done;){var c=f.value;T(l,c,Reflect.get(i,c))}}catch(e){u.e(e)}finally{u.f()}}if(!p(a)){var y,d=A(a);try{for(d.s();!(y=d.n()).done;)j(y.value,l)}catch(e){d.e(e)}finally{d.f()}}h(n)?w(l,t):E(l,t,n)}else if(e._.type&s.TYPE.TEXT){var v=(g=e.props.text,document.createTextNode(g));e._.el=v,h(n)?w(v,t):E(v,t,n)}var g}function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){var n;if(e._.type&s.TYPE.TEXT&&t._.type&s.TYPE.TEXT)return e._.el.nodeValue=t.props.text,void(t._.el=e._.el);var r=e._.el.parentNode,o=null!==(n=e._.el.nextSibling)&&void 0!==n?n:void 0;r.removeChild(e._.el),j(t,r,o)}function O(e,t){if(h(e)||h(t))console.warn("There are something undefined when patching a VNode. (You may try to modify an array's length larger directly.)");else{e._.el.parentNode;var n=e._.el;if(e._.type===t._.type)if(e._.type&s.TYPE.TEXT)e.props.text!==t.props.text?C(e,t):t._.el=n;else if(e.type!==t.type)C(e,t);else{t._.el=n;var r,o=t.props,i=e.props,a=x(Reflect.ownKeys(o));try{for(a.s();!(r=a.n()).done;){var l=r.value;i[l]!==o[l]&&(null===o[l]?S(n,l):T(n,l,o[l]))}}catch(e){a.e(e)}finally{a.f()}var f,u=x(Reflect.ownKeys(i));try{for(u.s();!(f=u.n()).done;){var c=f.value;-1===Object.keys(o).indexOf(c)&&S(n,c)}}catch(e){u.e(e)}finally{u.f()}for(var y=e.children,d=t.children,v=y.length>d.length?d.length:y.length,p=0;p<v;p++)O(y[p],d[p]);if(v===y.length)for(var m=v;m<d.length;m++)j(d[m],n);else for(var g=v;g<y.length;g++)b=y[g]._.el,n.removeChild(b);null===t._.el&&console.log(e,t)}else C(e,t)}var b}c(s,"TYPE",{ELEMENT:1,TEXT:2}),c(s,"INDEX",0);var N={h:m,cloneVNode:function e(t){var n=m(t.type,Object.assign({},t.props),t.children.map((function(t){return e(t)})));return n._.el=t._.el,n._.clonedFromIndex=t._.index,n},createApp:function(e,t){var n,r=!1;l((function(){var o=e.render();r?O(n,o):(j(o,t),r=!0),n=o}))},Component:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};u(this,e),this.data=f(t),this.render=n.bind(this.data)},reactive:f,effect:l};window.myVue=N})();